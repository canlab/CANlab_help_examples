
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>mediation_example_script_2</title><meta name="generator" content="MATLAB 9.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2018-07-17"><meta name="DC.source" content="mediation_example_script_2.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">1. Locate the sample data directory and files with sample behavioral data</a></li><li><a href="#3">2. Locate the images and list file names</a></li><li><a href="#4">3. Create a new test directory to run mediation</a></li><li><a href="#5">4a. Run the mediation with OLS (quick):</a></li><li><a href="#6">4b. Run the mediation with bootstrapping:</a></li><li><a href="#7">5. Get results and publish an HTML report:</a></li><li><a href="#8">6. Get and save results (older format but nore complete):</a></li></ul></div><pre class="codeinput"><span class="comment">% mediation_example_script1 and 2 do the same analysis.</span>
<span class="comment">% ...script1 is very terse, and includes the essential commands only.</span>
<span class="comment">% ...script2 is longer and includes more checking that files are available, etc.</span>

<span class="comment">% Go to the directory this script is stored in and run the script from</span>
<span class="comment">% there.</span>

disp(<span class="string">'Mediation example script: Creating a new analysis subfolder and running'</span>)
disp(<span class="string">'Sample mediation analysis here:'</span>);

basedir = pwd;
disp(basedir);
</pre><pre class="codeoutput">Mediation example script: Creating a new analysis subfolder and running
Sample mediation analysis here:
/Users/torwager/Documents/GitHub
</pre><h2 id="2">1. Locate the sample data directory and files with sample behavioral data</h2><p>--------------------------------------------------------------------- Goal: Make sure we have folders for the data and mask on the Matlab path</p><pre class="codeinput"><span class="comment">% Locate pre-cooked results (and behavioral data in Mediation_SETUP.mat):</span>
dir_to_find = <span class="string">'mediation_Example_Data_Wager2008_Msearch_R_XisRIFGstim_norobust'</span>;

dinf = what(dir_to_find);
<span class="keyword">if</span> isempty(dinf)
    disp(<span class="string">'CANNOT FIND Pre-cooked mediation results'</span>)
    fprintf(<span class="string">'Looking for: %s\n'</span>, dir_to_find);
    disp(<span class="string">'Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com'</span>);
    disp(<span class="string">'Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path'</span>);
    <span class="keyword">return</span>
<span class="keyword">end</span>
beh_file_path = dinf.path;

behavior_file = fullfile(beh_file_path, <span class="string">'mediation_SETUP.mat'</span>);

<span class="comment">% Locate image data in Sample Datasets:</span>
dir_to_find = <span class="string">'CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg'</span>;

dinf = what(dir_to_find);
<span class="keyword">if</span> isempty(dinf)
    disp(<span class="string">'CANNOT FIND sample image data'</span>)
    fprintf(<span class="string">'Looking for: %s\n'</span>, dir_to_find);
    disp(<span class="string">'Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com'</span>);
    disp(<span class="string">'Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path'</span>);
    <span class="keyword">return</span>
<span class="keyword">end</span>
image_file_path = dinf.path;

<span class="comment">% Optional: Specify a mask for the analysis</span>
<span class="comment">% You can run without this,but it's helpful.</span>
<span class="comment">% You can also use a mask to constrain multiple comparisons correction when</span>
<span class="comment">% you get results:</span>

mask_name = which(<span class="string">'gray_matter_mask.img'</span>);

<span class="keyword">if</span> isempty(mask_name)
    disp(<span class="string">'CANNOT FIND mask image'</span>)
    fprintf(<span class="string">'Looking for: %s\n'</span>, <span class="string">'gray_matter_mask.img'</span>);
    disp(<span class="string">'Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com'</span>);
    disp(<span class="string">'Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path'</span>);
    <span class="keyword">return</span>
<span class="keyword">end</span>

<span class="comment">% Alternative:  specify mask file from saved mediation output</span>
<span class="comment">% mask_name = fullfile(beh_file_path, 'mask.img');</span>
</pre><h2 id="3">2. Locate the images and list file names</h2><p>--------------------------------------------------------------------- Goal: Generate a list of the image filenames you want to use in the mediation</p><pre class="codeinput"><span class="comment">% Load an object with the emotion regulation data:</span>
<span class="comment">% save the file names in img_names</span>
data_obj = load_image_set(<span class="string">'emotionreg'</span>);
img_names = data_obj.fullpath;

<span class="comment">% Alternative: List image names; may not work on all file systems</span>
<span class="comment">% img_names = filenames(fullfile(image_file_path, 'con*img'), 'char');</span>
</pre><pre class="codeoutput">Data found.
Loaded images:
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810001.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810002.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810003.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810004.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810005.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810006.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810007.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810008.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810009.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810010.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810011.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810012.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810013.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810014.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810015.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810016.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810017.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810018.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810019.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810020.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810021.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810022.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810023.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810024.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810025.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810026.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810027.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810028.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810029.img
/Users/torwager/Documents/GitHub/CanlabCore/CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg/con_00810030.img
</pre><h2 id="4">3. Create a new test directory to run mediation</h2><p>---------------------------------------------------------------------</p><pre class="codeinput"><span class="comment">% make a new analysis directory</span>
andir = <span class="string">'Test_mediation'</span>;
mkdir(andir)
cd(andir)
</pre><h2 id="5">4a. Run the mediation with OLS (quick):</h2><p>--------------------------------------------------------------------- Fast version: No bootstrapping. Good for a preliminary check:</p><pre class="codeinput">results = mediation_brain(SETUP.X, SETUP.Y, img_names, <span class="string">'names'</span>, {<span class="string">'IFG'</span> <span class="string">'ReappSuccess'</span> <span class="string">'BrainMediator'</span>}, <span class="string">'mask'</span>, mask_name);
</pre><pre class="codeoutput error">Undefined variable "SETUP" or class "SETUP.X".

Error in mediation_example_script_2 (line 91)
results = mediation_brain(SETUP.X, SETUP.Y, img_names, 'names', {'IFG' 'ReappSuccess' 'BrainMediator'}, 'mask', mask_name);
</pre><h2 id="6">4b. Run the mediation with bootstrapping:</h2><p>--------------------------------------------------------------------- Slow version: Good for final results. For FINAL results, we recommend 10,000 bootstrap samples</p><pre class="codeinput">results = mediation_brain(SETUP.X, SETUP.Y, img_names, <span class="string">'names'</span>, {<span class="string">'IFG'</span> <span class="string">'ReappSuccess'</span> <span class="string">'BrainMediator'</span>}, <span class="string">'mask'</span>, mask_name, <span class="string">'boot'</span>, <span class="string">'pvals'</span>, 5, <span class="string">'bootsamples'</span>, 1000);
</pre><h2 id="7">5. Get results and publish an HTML report:</h2><p>---------------------------------------------------------------------</p><pre class="codeinput">publish_mediation_report
</pre><h2 id="8">6. Get and save results (older format but nore complete):</h2><p>---------------------------------------------------------------------</p><pre class="codeinput">mediation_brain_results_all_script;
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018a</a><br></p></div><!--
##### SOURCE BEGIN #####

% mediation_example_script1 and 2 do the same analysis.
% ...script1 is very terse, and includes the essential commands only.
% ...script2 is longer and includes more checking that files are available, etc.

% Go to the directory this script is stored in and run the script from
% there.

disp('Mediation example script: Creating a new analysis subfolder and running')
disp('Sample mediation analysis here:');

basedir = pwd;
disp(basedir);

%% 1. Locate the sample data directory and files with sample behavioral data
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% Goal: Make sure we have folders for the data and mask on the Matlab path

% Locate pre-cooked results (and behavioral data in Mediation_SETUP.mat):
dir_to_find = 'mediation_Example_Data_Wager2008_Msearch_R_XisRIFGstim_norobust';

dinf = what(dir_to_find);
if isempty(dinf)
    disp('CANNOT FIND Pre-cooked mediation results')
    fprintf('Looking for: %s\n', dir_to_find);
    disp('Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com');
    disp('Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path');
    return
end
beh_file_path = dinf.path;

behavior_file = fullfile(beh_file_path, 'mediation_SETUP.mat');

% Locate image data in Sample Datasets:
dir_to_find = 'CanlabCore/Sample_datasets/Wager_et_al_2008_Neuron_EmotionReg';

dinf = what(dir_to_find);
if isempty(dinf)
    disp('CANNOT FIND sample image data')
    fprintf('Looking for: %s\n', dir_to_find);
    disp('Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com');
    disp('Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path');
    return
end
image_file_path = dinf.path;

% Optional: Specify a mask for the analysis
% You can run without this,but it's helpful.
% You can also use a mask to constrain multiple comparisons correction when
% you get results:

mask_name = which('gray_matter_mask.img');

if isempty(mask_name)
    disp('CANNOT FIND mask image')
    fprintf('Looking for: %s\n', 'gray_matter_mask.img');
    disp('Install Canlab_Core_Tools and Mediation Toolbox from canlab.github.com');
    disp('Run canlab_toolbox_setup or add toolboxes with subfolders to the Matlab path');
    return
end

% Alternative:  specify mask file from saved mediation output
% mask_name = fullfile(beh_file_path, 'mask.img');


%% 2. Locate the images and list file names
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% Goal: Generate a list of the image filenames you want to use in the mediation

% Load an object with the emotion regulation data:
% save the file names in img_names
data_obj = load_image_set('emotionreg');
img_names = data_obj.fullpath;  

% Alternative: List image names; may not work on all file systems
% img_names = filenames(fullfile(image_file_path, 'con*img'), 'char');


%% 3. Create a new test directory to run mediation
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-

% make a new analysis directory
andir = 'Test_mediation';
mkdir(andir)
cd(andir)

%% 4a. Run the mediation with OLS (quick):
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% Fast version: No bootstrapping. Good for a preliminary check:

results = mediation_brain(SETUP.X, SETUP.Y, img_names, 'names', {'IFG' 'ReappSuccess' 'BrainMediator'}, 'mask', mask_name);

%% 4b. Run the mediation with bootstrapping:
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% Slow version: Good for final results. For FINAL results, we recommend
% 10,000 bootstrap samples

results = mediation_brain(SETUP.X, SETUP.Y, img_names, 'names', {'IFG' 'ReappSuccess' 'BrainMediator'}, 'mask', mask_name, 'boot', 'pvals', 5, 'bootsamples', 1000);

%% 5. Get results and publish an HTML report:
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-

publish_mediation_report

%% 6. Get and save results (older format but nore complete):
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-

mediation_brain_results_all_script;


##### SOURCE END #####
--></body></html>